---
title: Tabelle di base
layout: default
label: sec_tabbase
url: /page/tabelle-di-base
---
<h2>Parsing preliminare</h2>

<a name='parsing'></a>
<p>Come abbiamo visto in \sezione{sec:struttura}, è necessario definire come suddividere il testo in modo che ogni token ottenuto rappresenti una parola (nel senso comune del termine). Il metodo scelto prevede l'uso di espressioni regolari, ognuna delle quali individua un tipo di token, come scelto dall'utente.</p>
<figure>\myfig[t]{Tabelle di base: definizione di lingua e espressioni</figure>
<p>regolari per il parsing iniziale. Le frecce indicano una foreign key (f.k.). In grigio le tabelle di relazione per le relazioni molti a molti.}{\input{immagini/alpha.tex}}{fig:alpha}</p>
<p>In \figura{fig:alpha} sono rappresentate le tabelle necessarie. Una lingua è definita da un insieme di espressioni regolari. Di queste, una viene scelta per definire i delimitatori di periodo: è necessario imporre un vincolo, in modo che il delimitatore di periodo sia tra i token previsti per la lingua.\footnote{Il modo in cui imporre questo vincolo dipende dal motore di database e dall'applicazione. In Django è sufficiente definire un controllo aggiuntivo in fase di salvataggio dei dati. Volendo, con PostgreSQL si può definire un trigger, ossia un controllo che viene eseguito al momento dell'inserimento dei dati. Altri motori possono usare altri meccanismi.} Il delimitatore di periodo individua quei token che fanno fermare l'analizzatore sintattico (una funzione equivalente a quella del simbolo \$ in \figura{fig:parserlr}).</p>
<p>\tabula[p]{Esempio di espressioni regolari per il parsing dell'italiano, in grassetto quella possibile come separatore di periodi. Nella tabella in basso l'output risultante con un brano di esempio. Le notazioni {\tt (?={\it x})}, {\tt (?!{\it x})}, {\tt (?<={\it x})} e {\tt (?<!{\it x})} sono estensioni di Python (individuano il testo adiacente, rispettivamente come seguito, non seguito, preceduto, non preceduto da {\it x}). }{tab:alpha}{ \noindent\begin{scriptsize}</p>
<table>{l>{\tt}l>{\it}p{3cm}}
 space            & [ ] & spazio da solo\\ dialog mark      & [\textquotedbl «»“”]\\ hyphen           & [—-] & tipi diversi di trattino\\ ellipses         & …|[.]\{2,\} & tre puntini (unico carattere) o più di due punti consecutivi\\ numbers          & [0-9]+\\ brackets         & [()\{\}\textbackslash [\textbackslash ]]\\ apostrophe alone & (?<![a-zA-ZàèìòùáéíóúÀÈÌÒÙÁÉÍÓÚ])[\textquotesingle ’]&apostrofo non preceduto da altri caratteri\\ alpha            & [a-zA-ZàèìòùáéíóúÀÈÌÒÙÁÉÍÓÚ]+[\textquotesingle ’]?&caratteri alfabetici eventualmente seguiti da apostrofo\\ others           & [\^{}()\{\}\textbackslash [\textbackslash ]a-zA-ZàèìòùáéíóúÀÈÌÒÙÁÉÍÓÚ ?,;:!….\textquotesingle ’\textbackslash t\textbackslash n\textbackslash r0-9\textquotedbl«»“”—-]&caratteri che non sono quelli dell'elenco\\ tab              & [\textbackslash t]\\ new line         & [\textbackslash n\textbackslash r]\\ {\bf period}     & (?<![.])[.](?![.])|[?;:!]&punto isolato o altri segni di interpunzione forte\\ punctuation mark & [,]\\
</table>
<p>\vspace{1em}</p>
<table>[h]{|*{10}{l|}}
 \hline Un& &raggio& &di& &sole& &filtrò& \\ {\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}\\ \hline con& &decisione& &dalla& &finestra&,& &invase\\ {\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it p. mark}&{\it space}&{\it alpha}\\ \hline &la& &camera& &783& &dell’&hotel& \\ {\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it numbers}&{\it space}&{\it alpha}&{\it alpha}&{\it space}\\ \hline e& &si& &andò& &a& &schiantare&,\\ {\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it p. mark}\\ \hline &dritto& &dritto&,& &sul& &suo& \\ {\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it p. mark}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}\\ \hline occhio& &sinistro&.& &“&Oh& &no&,\\ {\it alpha}&{\it space}&{\it alpha}&{\it period}&{\it space}&{\it d. mark}&{\it alpha}&{\it space}&{\it alpha}&{\it p. mark}\\ \hline ”& &pensò& &Roberto& &deciso& &a& \\ {\it d. mark}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}\\ \hline non& &arrendersi&,& &“&sono& &stanco&,\\ {\it alpha}&{\it space}&{\it alpha}&{\it p. mark}&{\it space}&{\it d. mark}&{\it alpha}&{\it space}&{\it alpha}&{\it p. mark}\\ \hline &voglio& &dormire& &ancora&.&”\\ {\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it space}&{\it alpha}&{\it period}&{\it d. mark}\\ \hline
</table>
<p>\end{scriptsize}</pre></p>
<p>}</p>
<p>\afterpage{\clearpage}</p>
<p>In \tabella{tab:alpha} è riportato un esempio di come possono essere definite delle regole di parsing per un testo in italiano corrente. Le espressioni regolari sono un formalismo molto potente, che consentono di suddividere un brano con un'unica operazione e una precisione definibile a piacere. Nella versione più semplice, l'applicazione concatena tutte le espressioni regolari definite dall'utente, aggiunge quelle per i tag di formattazione e utilizza l'espressione risultante per suddividere il testo. Quindi confronta i token ottenuti con l'elenco delle espressioni regolari per etichettarli.\footnote{Il metodo reale di parsing e la descrizione dell'espressione regolare dipendono dal linguaggio di programmazione scelto. Qui e in seguito si userà quanto stabilito dalla libreria {\it re} di Python \spzcitedue{}{pythonre}{}{kuchling2012}. Per una trattazione più generale si veda \spzcite{cinderella1979}.}</p>
<p>Quindi per esempio, definite le espressioni regolari:</p>
<pre>\begin{lingtab}{l>{\tt}l}
 \label{leq:itregexp} alpha & [a-z]+\\ space & [ ]\\ numbers & [0-9]+\\\end{lingtab}</pre>
<p>\noindent l'espressione regolare risultante diventa:</p>
<pre>\begin{lingeq}
 {\tt ([a-z]+|[ ]|[0-9]+) }\end{lingeq}</pre>
<p>\noindent e utilizzando una funzione di split per espressioni regolari, la frase {\it oggi ho letto 3 libri} viene suddivisa in</p>
<pre>\begin{lingeq}
 {\tt [ `oggi' , ` ' , `ho' , ' ' , `letto' , ` ' , `3' , ` ' , `libri' ]}.\end{lingeq}</pre>
<p>A questo punto un successivo confronto indivduerà `3' come un token di tipo {\it numbers}, `oggi', `ho', `letto' e `libri' come token di tipo {\it alpha} e gli altri come token di tipo {\it space}.</p>
<p>Da notare che con le espressioni regolari definite in \leqref{leq:itregexp}, la frase {\it oggi, come di consuento, ho letto 3 libri}, produce un token aggiuntivo, `,', che verrà marcato come {\it sconosciuto} in quanto non previsto da nessuna regola.\footnote{La funzione di split, qui considerata come esempio di metodo di parsing, suddivide una stringa basandosi su un'espressione regolare data come delimitatore.  Ossia, data l'espressione regolare {\tt a+}, suddivide la stringa {\it defaabaghj} in {\tt ['def','b','ghj']}. Se si usano le parentesi, ossia {\tt (a+)}, ritorna anche le occorrenze della stringa, ossia: {\tt ['def','aa','b','a','ghj']}, che è il risultato che ci interessa \spzcite{pythonre}. } L'utente dovrà quindi inserire una nuova espressione regolare, per esempio:</p>
<pre>\begin{lingtab}{l>{\tt}l}
 punctuation & [.:;,?!]\\\end{lingtab}</pre>
<p>\noindent che consente al programma di individuare il tipo giusto per il token `,'.</p>
<h2>Descrizioni</h2>
<a name='descrdb'></a>
<figure>\myfig[t]{Tabelle di base: descrizioni. Le frecce indicano una foreign</figure>
<p>key (f.k.). In grigio le tabelle di relazione per le relazioni molti a molti. Una descrizione è una collezione di coppie attributo/valore o attributo/descrizione: quindi viene rappresentata come una tabella ({\it description}) con due relazioni molti a molti, rispettivamente con una tabella che unisce attributi e valori ({\it entry}) e una tabella che unisce attributi e descrizioni ({\it subdescription}). I valori (tabella {\it value}) possono essere costanti (campo {\it variable} posto a `false') o variabili (campo {\it variable} posto a `true'). All'interno di una descrizione possono apparire anche come negati (campo {\it negate} della tabella {\it entry}).}{\input{immagini/description.tex}}{fig:description}</p>
<p>La rappresentazione di una descrizione (\vedi \sezione{sec:descrizioni}) nel database è riportata in \figura{fig:description}. Una descrizione è una collezione di coppie attributo/valore o attributo/descrizione: quindi viene rappresentata come una tabella ({\it description}) con due relazioni molti a molti, rispettivamente con una tabella che unisce attributi e valori ({\it entry}) e una tabella che unisce attributi e descrizioni ({\it subdescription}). I valori (tabella {\it value}) possono essere costanti (campo {\it variable} posto a `false') o variabili (campo {\it variable} posto a `true'). All'interno di una descrizione possono apparire anche come negati (campo {\it negate} della tabella {\it entry}).</p>