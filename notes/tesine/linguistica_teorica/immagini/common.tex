\newcommand\drawover[2]{
  \draw[lineback] ($0.75*#1+0.25*#2$) to ($0.75*#2+0.25*#1$);
  \draw[grid] #1 to #2;
}

\newcommand\drawcontrasto[4]{
  \draw[<->] #1 to #2;
  \draw #1 -- node[fill=white,sloped]{\tiny #3} ($0.5*#1+0.5*#2$);
  \draw ($0.5*#1+0.5*#2$) -- node[fill=white,sloped]{\tiny #4} #2;
}

\def\alphapref{languages}

%% \newcommand\tablerow[6]{
%%   \draw (#1,#2) -- ($(#1+#3,#2)$) -- ($(#1+#3,#2+1)$) -- ($(#1,#2+1)$) -- cycle;
%%   \node (#4#5) at ($(#1+#3*0.25,#2+.5)$) {#5};
%%   \node (#4#5def) at ($(#1+#3*0.75,#2+.5)$) {\it #6};
%% }

\newcounter{dbtablerow}
\setcounter{dbtablerow}{0}

%\c@dbtabley

\newenvironment{dbtabella}[7]{
  \def\dbtablestyle{#1}
  \def\dbtablex{#2}
  \def\dbtabley{#3}
  \def\dbtablelen{#4}
  \def\dbtablenrows{#5}
  \def\dbtablepref{#6}
  \def\dbtablename{#7}
  \setcounter{dbtablerow}{0}
  \filldraw[\dbtablestyle] (\dbtablex,\dbtabley) 
  -- ($(\dbtablex+\dbtablelen,\dbtabley)$) 
  -- ($(\dbtablex+\dbtablelen,\dbtabley-\dbtablenrows-2)$) 
  -- ($(\dbtablex,\dbtabley-\dbtablenrows-2)$)  -- cycle;
  \filldraw[\dbtablestyle top] (\dbtablex,\dbtabley) 
  -- ($(\dbtablex+\dbtablelen,\dbtabley)$) 
  [sharp corners] -- ($(\dbtablex+\dbtablelen,\dbtabley-1)$) 
  -- ($(\dbtablex,\dbtabley-1)$) [rounded corners]  -- cycle;
  \node (\dbtablename) at ($(\dbtablex+\dbtablelen/2,\dbtabley-.6)$) {\bf \dbtablename};
  \draw[\dbtablestyle] ($(\dbtablex,\dbtabley-1)$) -- ($(\dbtablex+\dbtablelen,\dbtabley-1)$);
  \node[anchortab] (\dbtablename id) at ($(\dbtablex,\dbtabley-1.6)$) {};
  \node (\dbtablename id lab) at ($(\dbtablex+\dbtablelen*.3,\dbtabley-1.6)$) {id};
  \node (\dbtablename id def) at ($(\dbtablex+\dbtablelen*.7,\dbtabley-1.6)$) {\it integer};
  \stepcounter{dbtablerow}
}{}

\newcommand\tablerow[2]{
  \draw[\dbtablestyle] ($(\dbtablex,\dbtabley-1-\thedbtablerow)$) 
  -- ($(\dbtablex+\dbtablelen,\dbtabley-1-\thedbtablerow)$);
  \node (\dbtablename #1) at ($(\dbtablex+\dbtablelen*.3,\dbtabley-1.6-\thedbtablerow)$) {#1};
  \node (\dbtablename #1 def) at ($(\dbtablex+\dbtablelen*.7,\dbtabley-1.6-\thedbtablerow)$) {\it #2};
  \stepcounter{dbtablerow}
}

\newcommand\tableflink[2]{
  \tablerow{#1}{f.k. #2}
}

\newcommand\tablelink[3][right]{
  \draw[\dbtablestyle] ($(\dbtablex,\dbtabley-1-\thedbtablerow)$) 
  -- ($(\dbtablex+\dbtablelen,\dbtabley-1-\thedbtablerow)$);
  \node (\dbtablename #2) at ($(\dbtablex+\dbtablelen*.3,\dbtabley-1.6-\thedbtablerow)$) {#2};
  \node (\dbtablename #2 def) at ($(\dbtablex+\dbtablelen*.7,\dbtabley-1.6-\thedbtablerow)$) {\it f.k.};
  \ifthenelse{\equal{#1}{right}}%
  {\draw[->] ($(\dbtablex+\dbtablelen,\dbtabley-1.6-\thedbtablerow)$) to [out=0,in=180] (#3id.west);}%
  {\draw[->] ($(\dbtablex,\dbtabley-1.6-\thedbtablerow)$) to [out=180,in=180] (#3id.west);}
  \stepcounter{dbtablerow}
}

\newcommand\tableolink[3][right]{
  \draw[\dbtablestyle] ($(\dbtablex,\dbtabley-1-\thedbtablerow)$) 
  -- ($(\dbtablex+\dbtablelen,\dbtabley-1-\thedbtablerow)$);
  \node (\dbtablename #2) at ($(\dbtablex+\dbtablelen*.3,\dbtabley-1.6-\thedbtablerow)$) {#2};
  \node (\dbtablename #2 def) at ($(\dbtablex+\dbtablelen*.7,\dbtabley-1.6-\thedbtablerow)$) {\it f.k.};
  \ifthenelse{\equal{#1}{right}}%
  {\draw[<->] ($(\dbtablex+\dbtablelen,\dbtabley-1.6-\thedbtablerow)$) to [out=0,in=180] (#3id.west);}%
  {\draw[<->] ($(\dbtablex,\dbtabley-1.6-\thedbtablerow)$) to [out=180,in=180] (#3id.west);}
  \stepcounter{dbtablerow}
}

\definecolor{bluea}{rgb}{0.6,0.6,1}
\definecolor{blueb}{rgb}{0.8,0.8,1}
\definecolor{reda}{rgb}{1,0.6,0.6}
\definecolor{redb}{rgb}{1,0.8,0.8}
\definecolor{yellowa}{rgb}{1,1,0.6}
\definecolor{yellowb}{rgb}{1,1,0.8}


